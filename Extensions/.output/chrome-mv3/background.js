var background=(function(){"use strict";function a(r){return r==null||typeof r=="function"?{main:r}:r}const n=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,c=a(()=>{n.action.onClicked.addListener(r=>{r?.id&&n.sidePanel.open({tabId:r.id})}),n.runtime.onMessage.addListener((r,d,o)=>r.type==="TAKE_SCREENSHOT"?(n.tabs.query({active:!0,currentWindow:!0}).then(e=>{const u=e[0];if(!u?.id){o({error:"No active tab"});return}return n.tabs.captureVisibleTab(u.windowId??void 0,{format:"jpeg",quality:85})}).then(e=>{o(e?{screenshot:e}:{error:"Capture failed"})}).catch(e=>o({error:String(e)})),!0):!1)});function f(){}function t(r,...d){}const s={debug:(...r)=>t(console.debug,...r),log:(...r)=>t(console.log,...r),warn:(...r)=>t(console.warn,...r),error:(...r)=>t(console.error,...r)};let i;try{i=c.main(),i instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(r){throw s.error("The background crashed on startup!"),r}var l=i;return l})();

var content=(function(){"use strict";function v(e){return e}const o=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,h={matches:["<all_urls>"],main(){o.runtime.onMessage.addListener((e,t,n)=>e.type==="CAPTURE_SCREENSHOT"?(o.runtime.sendMessage({type:"TAKE_SCREENSHOT"}).then(n).catch(r=>n({error:String(r)})),!0):!1)}};function s(e,...t){}const u={debug:(...e)=>s(console.debug,...e),log:(...e)=>s(console.log,...e),warn:(...e)=>s(console.warn,...e),error:(...e)=>s(console.error,...e)};var E=class d extends Event{static EVENT_NAME=c("wxt:locationchange");constructor(t,n){super(d.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}};function c(e){return`${o?.runtime?.id}:content:${e}`}function S(e){let t,n;return{run(){t==null&&(n=new URL(location.href),t=e.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new E(r,n)),n=r)},1e3))}}}var g=class i{static SCRIPT_STARTED_MESSAGE_TYPE=c("wxt:content-script-started");id;abortController;locationWatcher=S(this);constructor(t,n){this.contentScriptName=t,this.options=n,this.id=Math.random().toString(36).slice(2),this.abortController=new AbortController,this.stopOldScripts(),this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return o.runtime?.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const r=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(t,n){const r=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(t){const n=requestAnimationFrame((...r)=>{this.isValid&&t(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const r=requestIdleCallback((...l)=>{this.signal.aborted||t(...l)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(t,n,r,l){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(n.startsWith("wxt:")?c(n):n,r,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),u.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){document.dispatchEvent(new CustomEvent(i.SCRIPT_STARTED_MESSAGE_TYPE,{detail:{contentScriptName:this.contentScriptName,messageId:this.id}})),window.postMessage({type:i.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:this.id},"*")}verifyScriptStartedEvent(t){const n=t.detail?.contentScriptName===this.contentScriptName,r=t.detail?.messageId===this.id;return n&&!r}listenForNewerScripts(){const t=n=>{!(n instanceof CustomEvent)||!this.verifyScriptStartedEvent(n)||this.notifyInvalidated()};document.addEventListener(i.SCRIPT_STARTED_MESSAGE_TYPE,t),this.onInvalidated(()=>document.removeEventListener(i.SCRIPT_STARTED_MESSAGE_TYPE,t))}};function f(){}function a(e,...t){}const m={debug:(...e)=>a(console.debug,...e),log:(...e)=>a(console.log,...e),warn:(...e)=>a(console.warn,...e),error:(...e)=>a(console.error,...e)};return(async()=>{try{const{main:e,...t}=h;return await e(new g("content",t))}catch(e){throw m.error('The content script "content" crashed on startup!',e),e}})()})();
content;
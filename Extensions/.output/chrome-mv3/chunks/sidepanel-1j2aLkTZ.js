import{b as Y,j as e,r as d,R as Ze,a as Qe}from"./browser-BaKZ5YhY.js";const Ee="https://gapah.vercel.app";function ea(a){const t=new URLSearchParams({source:"extension",redirect_url:a});return`${Ee}/login?${t.toString()}`}function aa(a){const t=new URLSearchParams({source:"extension",redirect_url:a});return`${Ee}/login?${t.toString()}&mode=register`}const Ie={API_KEY:"apiKey",LICENSE:"license",MODEL:"model",DEFAULT_LANGUAGE:"defaultLanguage",SETTINGS:"settings",AI_PROVIDER:"aiProvider",AI_BASE_URL:"aiBaseUrl",AI_OAUTH_TOKEN:"aiOauthToken",AI_CUSTOM_MODEL:"aiCustomModel"};function le(){try{const a=typeof globalThis<"u"?globalThis:{},t=a.browser??(typeof Y<"u"?Y:void 0),s=a.chrome,n=t?.storage?.local??s?.storage?.local;return n?.get&&n?.set?n:void 0}catch{return}}function ta(){return le()!==void 0}async function I(a){const t=le();if(!t)return;const s=Ie[a]??a;return(await t.get(String(s)))[String(s)]}async function L(a,t){const s=le();if(!s)return;const n=Ie[a]??a;await s.set({[String(n)]:t})}async function Le(){return I("apiKey")}async function fe(a){await L("apiKey",a)}async function se(){return I("license")}async function na(a){await L("license",a)}async function Oe(){return I("model")}async function ye(a){await L("model",a)}async function sa(){return I("defaultLanguage")}async function oa(a){await L("defaultLanguage",a)}async function Ue(){return I("aiProvider")}async function ve(a){await L("aiProvider",a)}async function De(){return I("aiBaseUrl")}async function we(a){await L("aiBaseUrl",a)}async function Re(){return I("aiOauthToken")}async function je(a){await L("aiOauthToken",a)}async function $e(){return I("aiCustomModel")}async function ke(a){await L("aiCustomModel",a)}function ia(a){window.open(ea(a),"_blank","noopener,noreferrer")}function ra(a){window.open(aa(a),"_blank","noopener,noreferrer")}function ca({onAuthenticated:a}){const t=typeof Y<"u"?Y.runtime.getURL("sidepanel.html"):`${window.location.origin}${window.location.pathname}`;return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-[var(--gapah-bg)] p-6",children:e.jsxs("div",{className:"gapah-card w-full max-w-sm p-6 text-center",children:[e.jsx("h1",{className:"mb-2 text-lg font-semibold text-[var(--gapah-text)]",children:"Gapah"}),e.jsx("p",{className:"mb-4 text-sm text-[var(--gapah-text-secondary)]",children:"Sign in to use Ad Copy and Data Lens. If you don’t have an account, register on the web app first."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:()=>ia(t),className:"gapah-btn-primary w-full py-2.5 text-sm",children:"Log in"}),e.jsx("button",{type:"button",onClick:()=>ra(t),className:"gapah-btn-secondary w-full py-2.5 text-sm",children:"Register"})]}),e.jsx("p",{className:"mt-4 text-xs text-[var(--gapah-text-secondary)]",children:"After logging in on the web app, return here — the extension will work automatically."})]})})}function la(a){if(!a||!a.startsWith("#"))return null;const t=new URLSearchParams(a.slice(1)),s=t.get("access_token")?.trim(),n=t.get("tier")??"byok";return s?n!=="managed_pro"&&n!=="byok"?{accessToken:s,tier:"byok"}:{accessToken:s,tier:n}:null}async function da(){const a=window.location.hash,t=la(a);return t?(await na({key:t.accessToken,tier:t.tier}),window.history.replaceState(null,"",window.location.pathname+window.location.search),!0):!1}function pa(a){return a==="managed_pro"?"Managed Pro":"BYOK / BYOAI lifetime"}const ua="modulepreload",ma=function(a){return"/"+a},Ne={},ha=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let g=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=g(s.map(p=>{if(p=ma(p),p in Ne)return;Ne[p]=!0;const h=p.endsWith(".css"),x=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":ua,h||(m.as="script"),m.crossOrigin="",m.href=p,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((j,f)=>{m.addEventListener("load",j),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${p}`)))})}))}function r(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})};const xa=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ga=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),Me=a=>{const t=ga(a);return t.charAt(0).toUpperCase()+t.slice(1)},Fe=(...a)=>a.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),ba=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var fa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ya=d.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:l,...c},g)=>d.createElement("svg",{ref:g,...fa,width:t,height:t,stroke:a,strokeWidth:n?Number(s)*24/Number(t):s,className:Fe("lucide",i),...!r&&!ba(c)&&{"aria-hidden":"true"},...c},[...l.map(([p,h])=>d.createElement(p,h)),...Array.isArray(r)?r:[r]]));const U=(a,t)=>{const s=d.forwardRef(({className:n,...i},r)=>d.createElement(ya,{ref:r,iconNode:t,className:Fe(`lucide-${xa(Me(a))}`,`lucide-${a}`,n),...i}));return s.displayName=Me(a),s};const va=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wa=U("check",va);const ja=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ka=U("chevron-down",ja);const Na=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ma=U("chevron-up",Na);const Aa=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ge=U("copy",Aa);const Ca=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Be=U("image",Ca);const Sa=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ta=U("settings",Sa);const _a=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pa=U("x",_a),Ea={openai:"OpenAI (GPT)",claude:"Claude (Anthropic)",gemini:"Google Gemini",grok:"xAI Grok",custom:"Custom (OpenAI-compatible API)"},oe={gemini:"https://generativelanguage.googleapis.com/v1beta/openai",grok:"https://api.x.ai/v1",custom:""},ie={openai:[{id:"gpt-5.2",label:"GPT-5.2 (latest)"},{id:"gpt-5-mini",label:"GPT-5 mini"},{id:"gpt-5-nano",label:"GPT-5 nano"},{id:"gpt-4.1",label:"GPT-4.1"},{id:"gpt-4o",label:"GPT-4o"},{id:"gpt-4o-mini",label:"GPT-4o mini"}],claude:[{id:"claude-opus-4-6",label:"Claude Opus 4.6"},{id:"claude-opus-4-5-20251101",label:"Claude Opus 4.5"},{id:"claude-sonnet-4-5-20250929",label:"Claude Sonnet 4.5"},{id:"claude-haiku-4-5-20251001",label:"Claude Haiku 4.5"}],gemini:[{id:"gemini-3-pro-preview",label:"Gemini 3 Pro (preview)"},{id:"gemini-3-flash-preview",label:"Gemini 3 Flash (preview)"},{id:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{id:"gemini-2.5-flash",label:"Gemini 2.5 Flash"},{id:"gemini-2.0-flash",label:"Gemini 2.0 Flash"}],grok:[{id:"grok-4",label:"Grok 4"},{id:"grok-3",label:"Grok 3"},{id:"grok-3-mini",label:"Grok 3 mini"}],custom:[{id:"custom",label:"Model ID (enter below)"}]};function Ia(a){return a==="gemini"||a==="grok"||a==="custom"}function La(a){return a.startsWith("gpt-5")||a.startsWith("o1")||a.startsWith("o3")||a.startsWith("o4")}const Oa="https://api.openai.com/v1";async function de(a,t,s){const n=s?.model??"gpt-5-mini",i=s?.max_tokens??1024,r=(s?.baseUrl??Oa).replace(/\/$/,""),l={model:n,messages:t};La(n)?l.max_completion_tokens=i:l.max_tokens=i;const c=await fetch(`${r}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(l)});if(!c.ok){const h=await c.text();throw new Error(`OpenAI-compatible API error: ${c.status} ${h}`)}return{content:(await c.json()).choices?.[0]?.message?.content??""}}async function pe(a,t,s,n){const i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":a,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:n?.model??"claude-sonnet-4-5-20250929",max_tokens:n?.max_tokens??1024,system:t,messages:[{role:"user",content:s}]})});if(!i.ok){const c=await i.text();throw new Error(`Anthropic API error: ${i.status} ${c}`)}return{content:(await i.json()).content?.[0]?.text??""}}const Ua="https://api.openai.com/v1",Da="https://generativelanguage.googleapis.com/v1beta/openai",Ra="https://api.x.ai/v1",$a={openai:"gpt-5-mini",claude:"claude-sonnet-4-5-20250929",gemini:"gemini-2.5-flash",grok:"grok-3-mini",custom:""};async function H(){const[a,t,s,n,i,r]=await Promise.all([Ue(),Le(),Re(),Oe(),$e(),De()]),l=a??"openai",c=(s?.trim()||t?.trim())??"",g=n==="custom"&&i?.trim()?i.trim():n?.trim()||$a[l];let p=r?.trim()||void 0;return l==="gemini"&&!p&&(p=Da),l==="grok"&&!p&&(p=Ra),{provider:l,apiKey:c,model:g,baseUrl:p}}async function Ke(a,t){const{provider:s,apiKey:n,model:i,baseUrl:r}=await H();if(!n)throw new Error("Set your API key or OAuth token in Settings first.");const l=t?.max_tokens??1024;if(s==="claude"){const g=a.find(x=>x.role==="system")?.content||"",p=a.filter(x=>x.role==="user").map(x=>x.content),h=Array.isArray(p[0])?String(p[0].find(x=>x.type==="text")?.text??""):String(p[0]??"");return pe(n,g,h,{model:i,max_tokens:l})}return de(n,a,{model:i,max_tokens:l,baseUrl:r||Ua})}const Fa=Object.freeze(Object.defineProperty({__proto__:null,chat:Ke,getEffectiveAIConfig:H},Symbol.toStringTag,{value:"Module"})),Ae=["openai","claude","gemini","grok","custom"];function Ga({onClose:a}){const[t,s]=d.useState("openai"),[n,i]=d.useState(""),[r,l]=d.useState(""),[c,g]=d.useState(""),[p,h]=d.useState(""),[x,m]=d.useState(""),[j,f]=d.useState("en"),[k,F]=d.useState(!1),[D,A]=d.useState("idle"),[V,S]=d.useState("");d.useEffect(()=>{Promise.all([Ue(),De(),Le(),Re(),Oe(),$e(),sa()]).then(([u,C,N,W,M,T,z])=>{const O=Ae.includes(u??"openai")?u:"openai";s(O),i(C??oe[O]??""),l(N??""),g(W??"");const R=ie[O],_=R.some($=>$.id==="custom");R.find($=>$.id===M)?(h(M),m(T??"")):_&&M?(h("custom"),m(M??T??"")):(h(R[0]?.id??"gpt-5.2"),m(T??"")),f(z??"en")})},[]),d.useEffect(()=>{if(t){const u=ie[t];!u.some(N=>N.id===p)&&u.length&&h(u[0].id),!n&&oe[t]&&i(oe[t]??"")}},[t]);const Q=async()=>{await ve(t),await we(n),await fe(r),await je(c);const u=p==="custom"&&x.trim()?x.trim():p;await ye(u),await ke(p==="custom"?x:""),await oa(j),F(!0),A("idle"),setTimeout(()=>F(!1),2e3)},G=async()=>{if(!(c?.trim()||r?.trim())){A("error"),S("Enter an API key or OAuth token first.");return}A("verifying"),S("");try{const{chat:C}=await ha(async()=>{const{chat:M}=await Promise.resolve().then(()=>Fa);return{chat:M}},void 0);await ve(t),await we(n),await fe(r),await je(c);const N=p==="custom"&&x.trim()?x.trim():p;if(await ye(N),await ke(p==="custom"?x:""),!(await H()).apiKey)throw new Error("No API key or token");await C([{role:"user",content:"Reply with exactly: OK"}],{max_tokens:10}),A("ok"),S("Token works."),setTimeout(()=>A("idle"),3e3)}catch(C){A("error"),S(C instanceof Error?C.message:"Verification failed.")}},ee=Ia(t),B=p==="custom",ae=ie[t]??[];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:e.jsxs("div",{className:"gapah-card w-full max-w-md shadow-xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[var(--gapah-card-border)] px-4 py-3 shrink-0",children:[e.jsx("h2",{className:"font-semibold text-[var(--gapah-text)]",children:"Settings"}),e.jsx("button",{type:"button",onClick:a,className:"rounded-lg p-1.5 text-[var(--gapah-text-secondary)] hover:bg-black/5 hover:text-[var(--gapah-text)]","aria-label":"Close Settings",children:e.jsx(Pa,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4 p-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"AI Provider (BYOK / BYOAI)"}),e.jsx("select",{value:t,onChange:u=>s(u.target.value),className:"gapah-input",children:Ae.map(u=>e.jsx("option",{value:u,children:Ea[u]},u))})]}),ee&&e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Base URL"}),e.jsx("input",{type:"url",value:n,onChange:u=>i(u.target.value),placeholder:t==="gemini"?"https://generativelanguage.googleapis.com/v1beta/openai":t==="grok"?"https://api.x.ai/v1":"https://your-endpoint.com/v1",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"API Key"}),e.jsx("input",{type:"password",value:r,onChange:u=>l(u.target.value),placeholder:"sk-... or API key",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"OAuth / Bearer token (optional)"}),e.jsx("input",{type:"password",value:c,onChange:u=>g(u.target.value),placeholder:"Leave empty to use API Key",className:"gapah-input"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:G,disabled:D==="verifying",className:"gapah-btn-secondary px-3 py-1.5 text-xs disabled:opacity-50",children:D==="verifying"?"Verifying…":"Verify token"}),D==="ok"&&e.jsx("span",{className:"text-xs text-green-600",children:V}),D==="error"&&e.jsx("span",{className:"text-xs text-red-600",children:V})]}),e.jsx("p",{className:"mt-1 text-xs text-[var(--gapah-text-secondary)]",children:"Use OAuth/Bearer if your provider uses it; otherwise use API Key. Click Verify to test."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Model"}),e.jsx("select",{value:p,onChange:u=>h(u.target.value),className:"gapah-input",children:ae.map(u=>e.jsx("option",{value:u.id,children:u.label},u.id))})]}),B&&e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Custom model name"}),e.jsx("input",{type:"text",value:x,onChange:u=>m(u.target.value),placeholder:"Model ID",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Default language"}),e.jsxs("select",{value:j,onChange:u=>f(u.target.value),className:"gapah-input",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"id",children:"Indonesia"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 border-t border-[var(--gapah-card-border)] px-4 py-3 shrink-0",children:[e.jsx("button",{type:"button",onClick:a,className:"gapah-btn-secondary px-4 py-2 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Q,className:"gapah-btn-primary px-4 py-2 text-sm",children:k?"Saved!":"Save"})]})]})})}const Ce=`You are an expert ad copywriter for TikTok Ads. Output concise, platform-perfect ad text.
- Max 100 characters for ad text.
- Hook in the first 3 seconds (first line).
- Casual, conversational tone.
- Include a clear CTA when appropriate.`,Se=a=>`Generate 3 variations of TikTok ad copy based on this context. Each variation must be 1-100 characters.

Context:
${a}`,Ba=`You are an expert ad copywriter for Meta (Facebook/Instagram) Ads.
- Primary text: recommend ~125 characters for mobile; can be longer.
- Headline: ~40 characters.
- Description: ~30 characters.
- Lead with benefit, use numbers/specifics when possible.`,Ka=a=>`Generate 3 variations of Meta ad copy (primary text + headline + description) based on this context.

Context:
${a}`,Ya=`You are an expert ad copywriter for Google Ads (Responsive Search, Display, Performance Max).
- Headlines: max 30 characters each.
- Descriptions: max 90 characters.
- Lead with benefit and clear CTA; include keywords where natural.
- Match the message to the landing page when URL/context is provided.`,Ha=a=>`Generate 3 variations of Google Ads copy (headlines + descriptions) based on this context. Each headline max 30 chars, each description max 90 chars.

Context:
${a}`,Va=`You are an expert ad copywriter for X (Twitter) Ads.
- Promoted tweets: max 280 characters (same as organic).
- Concise, punchy copy; strong hook in the first line.
- Use hashtags sparingly (1–3) when appropriate.
- Include a clear CTA.`,Wa=a=>`Generate 3 variations of X (Twitter) ad copy based on this context. Each variation max 280 characters.

Context:
${a}`,za="You are an expert ad copywriter. Generate short ad copy variations that match the user's exact requirements for count, max length, and style (emoji, exclamation).",Ja=(a,t)=>`Generate ad copy variations with these rules:
${[`Generate exactly ${t.count} variation(s).`,`Each variation must be at most ${t.maxChars} characters.`,t.useEmoji?"Use emoji where it fits the tone.":"Do not use emoji.",t.useExclamation?"You may use exclamation marks for emphasis.":"Do not use exclamation marks."].join(`
`)}

Context:
${a}`,Te="You are a marketing data analyst. Analyze the provided screenshot or data view and return a structured marketing insight.",_e=`Analyze this image and provide:
1. Key Trends (bullet points)
2. Anomalies (unusual spikes/drops or patterns)
3. Why (brief explanation of causes)
4. So What (actionable implications)
5. One-liner (single sentence summary for stakeholders)

Format as clear, concise markdown.`,re="Analyze this ad creative image. Return a short JSON with: description (what the image shows), keyMessage (main message), suggestedCopy (array of 2-3 short ad copy ideas, each under 100 chars for TikTok).";async function Xa(a,t,s,n){const i=a.startsWith("data:")?"":"image/jpeg",r=a.startsWith("data:")?a:`data:${i};base64,${a}`;if(s!=="claude"){const{content:g}=await de(t,[{role:"user",content:[{type:"image_url",image_url:{url:r}},{type:"text",text:re}]}],{model:n?.model??"gpt-4o",max_tokens:500,baseUrl:n?.baseUrl});try{return JSON.parse(g)}catch{return{suggestedCopy:[g],description:g}}}const{content:c}=await pe(t,re,`[Image attached]. ${re}`,{max_tokens:500});try{return JSON.parse(c)}catch{return{suggestedCopy:[c],description:c}}}async function qa(a,t,s,n){const i=a.startsWith("data:")?a:`data:image/jpeg;base64,${a}`;if(s!=="claude"){const{content:c}=await de(t,[{role:"system",content:Te},{role:"user",content:[{type:"image_url",image_url:{url:i}},{type:"text",text:_e}]}],{model:n?.model??"gpt-4o",max_tokens:1024,baseUrl:n?.baseUrl});return c}const{content:l}=await pe(t,Te,`[Image attached]. ${_e}`,{max_tokens:1024});return l}const q={id:"primaryText",label:"Primary text",spec:{recommended:125,max:2200,note:"50–150 recommended; truncated after ~125 chars on mobile"},countMin:1,countMax:5,countRecommended:5},Z={id:"headline",label:"Headline",spec:{recommended:27,max:40,note:"~27 visible before truncation on mobile"},countMin:1,countMax:5,countRecommended:5},ce={id:"description",label:"Description",spec:{recommended:30,max:30,note:"Optional; often hidden on some placements"},countMin:0,countMax:1},Za={platform:"Meta (Facebook/Instagram)",sourceUrl:"https://www.facebook.com/business/ads-guide/update",campaignTypes:[{id:"awareness",label:"Awareness"},{id:"traffic",label:"Traffic"},{id:"engagement",label:"Engagement"},{id:"leads",label:"Leads"},{id:"app_promotion",label:"App promotion"},{id:"sales",label:"Sales"}],assetTypes:[{id:"image",label:"Image",copyFields:[q,Z,{...ce,countMax:1}]},{id:"video",label:"Video",copyFields:[q,Z,{...ce,countMax:1}]},{id:"carousel",label:"Carousel",copyFields:[{id:"primaryText",label:"Primary text",spec:{recommended:80,max:void 0},countMin:1,countMax:1},{id:"headline",label:"Headline (per card)",spec:{recommended:45,max:void 0,note:"Per card"},countMin:2,countMax:10},{id:"description",label:"Description (per card)",spec:{recommended:18,max:void 0,note:"Per card"},countMin:2,countMax:10}]},{id:"collection",label:"Collection",copyFields:[q,Z]}],defaultCopyFields:[q,Z,ce],defaultTextSpecs:{primaryText:{recommended:125,max:2200,note:"Truncated after ~125 chars on mobile"},headline:{recommended:27,max:40},description:{recommended:30,max:30}},bestPractices:["Lead with benefit, not feature","Use numbers and specifics","Include social proof when possible","Test emoji vs no-emoji variants"]},Qa={platform:"Google Ads",sourceUrl:"https://support.google.com/google-ads/answer/13676244?hl=en",campaignTypes:[{id:"performance_max",label:"Performance Max",assetTypeIds:["image","video","text"]},{id:"search",label:"Search",assetTypeIds:["responsive_search","ad_assets"]},{id:"display",label:"Display",assetTypeIds:["responsive_display"]},{id:"demand_gen",label:"Demand Gen",assetTypeIds:["image","video","text"]},{id:"app",label:"App campaigns",assetTypeIds:["image","video","text"]}],assetTypes:[{id:"responsive_search",label:"Responsive Search Ad",copyFields:[{id:"headline",label:"Headline",spec:{max:30},countMin:3,countMax:15,countRecommended:10},{id:"description",label:"Description",spec:{max:90},countMin:2,countMax:4,countRecommended:4}]},{id:"ad_assets",label:"Ad assets / Business info",copyFields:[{id:"headline",label:"Headline",spec:{max:25},countMin:1,countMax:20,countRecommended:4},{id:"description",label:"Description",spec:{max:90},countMin:0,countMax:5,countRecommended:4},{id:"businessName",label:"Business name",spec:{max:25},countMin:1,countMax:1}]},{id:"responsive_display",label:"Responsive Display",copyFields:[{id:"headline",label:"Headline",spec:{max:30},countMin:1,countMax:5},{id:"longHeadline",label:"Long headline",spec:{max:90},countMin:1,countMax:1},{id:"description",label:"Description",spec:{max:90},countMin:1,countMax:5},{id:"businessName",label:"Business name",spec:{max:25},countMin:1,countMax:1}]},{id:"image",label:"Image / Visual (Pmax, Demand Gen)",copyFields:[{id:"headline",label:"Headline",spec:{max:30,note:"Include at least one ≤15 chars"},countMin:3,countMax:15,countRecommended:11},{id:"longHeadline",label:"Long headline",spec:{max:90},countMin:1,countMax:5,countRecommended:2},{id:"description",label:"Description",spec:{max:90},countMin:2,countMax:5,countRecommended:4},{id:"businessName",label:"Business name",spec:{max:25},countMin:1,countMax:1}]},{id:"video",label:"Video",copyFields:[{id:"headline",label:"Headline",spec:{max:30},countMin:1,countMax:15},{id:"description",label:"Description",spec:{max:90},countMin:0,countMax:5},{id:"businessName",label:"Business name",spec:{max:25},countMin:1,countMax:1}]},{id:"text",label:"Text (Pmax / Demand Gen)",copyFields:[{id:"headline",label:"Headline",spec:{max:30,note:"At least one ≤15 chars"},countMin:3,countMax:15},{id:"longHeadline",label:"Long headline",spec:{max:90},countMin:1,countMax:5},{id:"description",label:"Description",spec:{max:90},countMin:2,countMax:5},{id:"businessName",label:"Business name",spec:{max:25},countMin:1,countMax:1}]}],defaultCopyFields:[{id:"headline",label:"Headline",spec:{max:30},countMin:1,countMax:15},{id:"longHeadline",label:"Long headline",spec:{max:90},countMin:0,countMax:5},{id:"description",label:"Description",spec:{max:90},countMin:0,countMax:5},{id:"businessName",label:"Business name",spec:{max:25},countMin:0,countMax:1}],defaultTextSpecs:{headline:{max:30},longHeadline:{max:90},description:{max:90},businessName:{max:25}},bestPractices:["Include keywords in headlines where natural","Lead with benefit and clear CTA","Use numbers and specifics","Match message to landing page"]},et={platform:"TikTok",sourceUrl:"https://ads.tiktok.com/help/article/tiktok-auction-in-feed-ads?lang=en",campaignTypes:[{id:"reach",label:"Reach"},{id:"traffic",label:"Traffic"},{id:"video_views",label:"Video views"},{id:"community_interaction",label:"Community interaction"},{id:"app_promotion",label:"App promotion"},{id:"lead_generation",label:"Lead generation"},{id:"sales",label:"Sales"}],assetTypes:[{id:"in_feed",label:"In-feed (Non-Spark)",copyFields:[{id:"caption",label:"Ad caption",spec:{min:1,max:100,recommended:80,note:"12–80 recommended; no links, @, or #"},countMin:1,countMax:1},{id:"displayName",label:"Account name",spec:{max:20,note:"10 chars CJK or 20 others"},countMin:0,countMax:1}]},{id:"spark",label:"Spark Ads",copyFields:[{id:"caption",label:"Ad caption",spec:{note:"From organic post; max 4 lines including emojis"},countMin:0,countMax:1}]},{id:"topview",label:"TopView",copyFields:[{id:"caption",label:"Ad caption",spec:{min:1,max:100,recommended:80},countMin:1,countMax:1},{id:"displayName",label:"Account name",spec:{max:20},countMin:0,countMax:1}]},{id:"carousel",label:"Carousel",copyFields:[{id:"caption",label:"Ad caption",spec:{min:1,max:100,recommended:80},countMin:1,countMax:1},{id:"displayName",label:"Account name",spec:{max:20},countMin:0,countMax:1}]}],defaultCopyFields:[{id:"caption",label:"Ad caption",spec:{min:1,max:100,recommended:80,note:"12–80 characters recommended"},countMin:1,countMax:1},{id:"displayName",label:"Account name",spec:{max:20,note:"10 chars CJK or 20 others"},countMin:0,countMax:1}],defaultTextSpecs:{caption:{min:1,max:100,recommended:80,note:"12–80 characters recommended"},displayName:{max:20,note:"10 chars CJK or 20 others"}},bestPractices:["Hook in the first 3 seconds","Use casual, conversational language","Include a clear CTA","Use emoji in moderation"]},at={platform:"X (Twitter)",sourceUrl:"https://business.x.com/en/help/campaign-setup/creative-ad-specifications",campaignTypes:[{id:"promoted_tweet",label:"Promoted Tweet"},{id:"promoted_account",label:"Promoted Account"},{id:"takeover",label:"Takeover"},{id:"amplify_preroll",label:"Amplify Pre-roll"}],assetTypes:[{id:"tweet",label:"Tweet (text)",copyFields:[{id:"caption",label:"Post copy",spec:{max:280,note:"Same as organic tweet; each link reduces by 23"},countMin:1,countMax:1}]},{id:"account",label:"Account / Bio",copyFields:[{id:"caption",label:"Bio",spec:{max:160},countMin:1,countMax:1}]},{id:"video_preroll",label:"Video (Pre-roll)",copyFields:[{id:"caption",label:"Post copy",spec:{max:280,note:"Optional; video 15s recommended, max 2:20"},countMin:0,countMax:1}]},{id:"conversation",label:"Conversation / Pre-populated",copyFields:[{id:"caption",label:"Post copy",spec:{max:256},countMin:1,countMax:1},{id:"headline",label:"Headline",spec:{max:23},countMin:0,countMax:1}]}],defaultCopyFields:[{id:"caption",label:"Post copy",spec:{max:280,note:"Same as organic tweet limit"},countMin:1,countMax:1}],defaultTextSpecs:{caption:{max:280,note:"Same as organic tweet limit"}},bestPractices:["Concise, punchy copy","Hashtags sparingly (1–3)","Strong hook in first line","Clear CTA"]},ue={meta:Za,google:Qa,tiktok:et,twitter:at};function tt(a){return ue[a]}function me(a,t,s){const n=ue[a];if(!n)return[];if(s){const i=n.assetTypes.find(r=>r.id===s);if(i?.copyFields?.length)return i.copyFields;if(i?.textSpecs)return n.defaultCopyFields??[]}if(t){const i=n.campaignTypes.find(r=>r.id===t);if(i?.assetTypeIds?.length&&!s){const r=i.assetTypeIds[0],l=n.assetTypes.find(c=>c.id===r);if(l?.copyFields?.length)return l.copyFields}}return n.defaultCopyFields??[]}function nt(a,t,s){const n=ue[a];if(!n)return{};const i=me(a,t,s);if(i.length){const r={};for(const l of i)r[l.id]=l.spec;return r}if(s){const r=n.assetTypes.find(l=>l.id===s);if(r?.textSpecs)return{...n.defaultTextSpecs,...r.textSpecs}}if(t){const r=n.campaignTypes.find(l=>l.id===t);if(r?.assetTypeIds?.length&&!s){const l=r.assetTypeIds[0],c=n.assetTypes.find(g=>g.id===l);if(c?.textSpecs)return{...n.defaultTextSpecs,...c.textSpecs}}}return n.defaultTextSpecs}function Ye(a,t,s){const n=me(a,t,s);return n.length?n[0]:null}function st(a,t,s){const n=Ye(a,t,s);if(n){if(n.spec.max!=null)return n.spec.max;if(n.spec.recommended!=null)return n.spec.recommended}const i=nt(a,t,s),r=i.primaryText??i.caption??i.headline;if(r?.max!=null)return r.max;if(r?.recommended!=null)return r.recommended;switch(a){case"meta":return 125;case"google":return 90;case"tiktok":return 100;case"twitter":return 280;default:return 125}}const ot={tiktok:"TikTok",meta:"Meta",google:"Google Ads",twitter:"X",advanced:"Advanced"};function it(){const[a,t]=d.useState("tiktok"),[s,n]=d.useState(null),[i,r]=d.useState(null),[l,c]=d.useState(null),[g,p]=d.useState(""),[h,x]=d.useState(""),[m,j]=d.useState(""),[f,k]=d.useState(""),[F,D]=d.useState("Casual"),[A,V]=d.useState("en"),[S,Q]=d.useState(!1),[G,ee]=d.useState(3),[B,ae]=d.useState(125),[u,C]=d.useState(!0),[N,W]=d.useState(!0),[M,T]=d.useState([]),[z,O]=d.useState(!1),[R,_]=d.useState(""),P=d.useMemo(()=>a!=="advanced"?tt(a):null,[a]),$=P?.campaignTypes??[],he=d.useMemo(()=>{if(!P)return[];const o=s?P.campaignTypes.find(b=>b.id===s):null;return o?.assetTypeIds?.length?P.assetTypes.filter(b=>o.assetTypeIds.includes(b.id)):P.assetTypes},[P,s]),J=a==="advanced"?B:st(a,s,i),y=d.useMemo(()=>a!=="advanced"?Ye(a,s,i):null,[a,s,i]),xe=d.useMemo(()=>a!=="advanced"?me(a,s,i):[],[a,s,i]),te=y?.spec.note??null,ge=y&&y.countMax!=null&&y.countMax>1?y.countMin!=null&&y.countMin===y.countMax?`${y.countMax} variation(s)`:`Provide ${y.countMin??1}–${y.countMax} variations`:null,He=()=>{_(""),navigator.clipboard.read().then(o=>{const b=o.find(w=>w.types.includes("image/png")||w.types.includes("image/jpeg"));b?b.getType("image/png").then(w=>{const v=new FileReader;v.onload=()=>c(v.result),v.readAsDataURL(w)}).catch(()=>{b.getType("image/jpeg").then(w=>{const v=new FileReader;v.onload=()=>c(v.result),v.readAsDataURL(w)})}):_("No image in clipboard")}).catch(()=>_("Clipboard access denied"))},Ve=o=>{switch(a){case"tiktok":return{system:Ce,user:Se(o)};case"meta":return{system:Ba,user:Ka(o)};case"google":return{system:Ya,user:Ha(o)};case"twitter":return{system:Va,user:Wa(o)};case"advanced":return{system:za,user:Ja(o,{count:G,maxChars:B,useEmoji:N,useExclamation:u})};default:return{system:Ce,user:Se(o)}}},We=async()=>{_(""),O(!0),T([]);try{const o=await H();if(!o.apiKey){_("Set your API key or OAuth token in Settings first."),O(!1);return}let b=[g&&`Product: ${g}`,h&&`Brand: ${h}`,m&&`Key message: ${m}`,f&&`URL / Landing page: ${f}`,`Tone: ${F}. Language: ${A==="id"?"Indonesian":"English"}.`].filter(Boolean).join(`
`);if(l){const E=l.replace(/^data:image\/\w+;base64,/,""),ne=await Xa(E,o.apiKey,o.provider,{baseUrl:o.baseUrl,model:o.model});b=[b,ne.description,ne.keyMessage,ne.suggestedCopy?.join(" ")].filter(Boolean).join(`
`)}b.trim()||(b="Generate ad copy variations.");const w=a==="advanced"?G:3,v=J,{system:K,user:Xe}=Ve(b),{content:be}=await Ke([{role:"system",content:K},{role:"user",content:Xe}],{max_tokens:600}),X=be.split(/\n/).map(E=>E.replace(/^[\d\.\-\*]+\s*/,"").trim()).filter(E=>E.length>0&&E.length<=Math.max(v,300)),qe=(X.length>=w?X.slice(0,w):X.length?X:[be]).map(E=>({text:E}));T(qe)}catch(o){_(o instanceof Error?o.message:"Generation failed")}finally{O(!1)}},ze=o=>{const b=M[o]?.text;b&&(navigator.clipboard.writeText(b),T(w=>w.map((v,K)=>K===o?{...v,copied:!0}:v)),setTimeout(()=>T(w=>w.map((v,K)=>K===o?{...v,copied:!1}:v)),1500))},Je=o=>{t(o),n(null),r(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Platform"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["tiktok","meta","google","twitter","advanced"].map(o=>e.jsx("button",{type:"button",onClick:()=>Je(o),className:`gapah-platform-pill ${a===o?"gapah-platform-pill-active":"gapah-platform-pill-inactive"}`,children:ot[o]},o))})]}),a!=="advanced"&&P&&e.jsxs(e.Fragment,{children:[$.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Campaign type"}),e.jsxs("select",{value:s??"",onChange:o=>{const b=o.target.value;n(b||null),r(null)},className:"gapah-input",children:[e.jsx("option",{value:"",children:"Default"}),$.map(o=>e.jsx("option",{value:o.id,children:o.label},o.id))]})]}),he.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Asset type"}),e.jsxs("select",{value:i??"",onChange:o=>r(o.target.value||null),className:"gapah-input",children:[e.jsx("option",{value:"",children:"Default"}),he.map(o=>e.jsx("option",{value:o.id,children:o.label},o.id))]})]}),(y||te||J)&&e.jsxs("div",{className:"space-y-1 text-xs text-[var(--gapah-text-secondary)]",children:[y&&e.jsxs("p",{children:[e.jsxs("span",{className:"font-medium text-[var(--gapah-text)]",children:[y.label,":"]})," ","max ",J," characters",y.spec.recommended!=null&&y.spec.recommended!==y.spec.max&&e.jsxs(e.Fragment,{children:[" (recommended ",y.spec.recommended,")"]}),ge&&e.jsxs(e.Fragment,{children:[" · ",ge]})]}),te&&e.jsx("p",{children:te}),xe.length>1&&e.jsxs("p",{children:["Other fields: ",xe.slice(1).map(o=>`${o.label}${o.countMax&&o.countMax>1?` (${o.countMin??1}–${o.countMax})`:""}`).join(", ")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Image / Thumbnail (optional)"}),l?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l,alt:"Upload",className:"max-h-24 rounded-[var(--gapah-radius)] border border-[var(--gapah-card-border)] object-cover"}),e.jsx("button",{type:"button",onClick:()=>c(null),className:"absolute right-1 top-1 rounded bg-black/70 px-2 py-0.5 text-xs text-white hover:bg-black/80",children:"Clear"})]}):e.jsxs("button",{type:"button",onClick:He,className:"gapah-dashed-zone flex w-full items-center justify-center gap-2 py-6 text-sm",children:[e.jsx(Be,{className:"h-5 w-5"})," Paste image from clipboard"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Product name"}),e.jsx("input",{type:"text",value:g,onChange:o=>p(o.target.value),placeholder:"e.g. Skincare Serum",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Brand name"}),e.jsx("input",{type:"text",value:h,onChange:o=>x(o.target.value),placeholder:"e.g. Your Brand",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Key message"}),e.jsx("input",{type:"text",value:m,onChange:o=>j(o.target.value),placeholder:"e.g. Glowing skin in 7 days",className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"URL (Product URL / Landing page)"}),e.jsx("input",{type:"url",value:f,onChange:o=>k(o.target.value),placeholder:"https://...",className:"gapah-input"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"gapah-label",children:"Tone"}),e.jsxs("select",{value:F,onChange:o=>D(o.target.value),className:"gapah-input",children:[e.jsx("option",{value:"Casual",children:"Casual"}),e.jsx("option",{value:"Professional",children:"Professional"}),e.jsx("option",{value:"Urgent",children:"Urgent"}),e.jsx("option",{value:"Friendly",children:"Friendly"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"gapah-label",children:"Language"}),e.jsxs("select",{value:A,onChange:o=>V(o.target.value),className:"gapah-input",children:[e.jsx("option",{value:"en",children:"EN"}),e.jsx("option",{value:"id",children:"ID"})]})]})]}),a==="advanced"&&e.jsxs("div",{className:"gapah-variation-card space-y-3",children:[e.jsxs("button",{type:"button",onClick:()=>Q(!S),className:"flex w-full items-center justify-between text-left text-sm font-medium text-[var(--gapah-text)]",children:["Advanced options",S?e.jsx(Ma,{className:"h-4 w-4"}):e.jsx(ka,{className:"h-4 w-4"})]}),S&&e.jsxs("div",{className:"space-y-3 border-t border-[var(--gapah-card-border)] pt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Number of ad copy variations"}),e.jsx("input",{type:"number",min:1,max:10,value:G,onChange:o=>ee(Math.max(1,Math.min(10,Number(o.target.value)||1))),className:"gapah-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Max characters per ad copy"}),e.jsx("input",{type:"number",min:30,max:500,value:B,onChange:o=>ae(Math.max(30,Math.min(500,Number(o.target.value)||125))),className:"gapah-input"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-[var(--gapah-text-secondary)]",children:"Use exclamation marks"}),e.jsx("button",{type:"button",role:"switch","aria-checked":u,onClick:()=>C(!u),className:`relative inline-flex h-6 w-11 shrink-0 rounded-full border transition-colors ${u?"border-[var(--gapah-accent)] bg-[var(--gapah-accent)]":"border-[var(--gapah-card-border)] bg-black/5"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transition-transform ${u?"translate-x-5":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-[var(--gapah-text-secondary)]",children:"Use emoji"}),e.jsx("button",{type:"button",role:"switch","aria-checked":N,onClick:()=>W(!N),className:`relative inline-flex h-6 w-11 shrink-0 rounded-full border transition-colors ${N?"border-[var(--gapah-accent)] bg-[var(--gapah-accent)]":"border-[var(--gapah-card-border)] bg-black/5"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transition-transform ${N?"translate-x-5":"translate-x-0.5"}`})})]})]})]}),R&&e.jsx("p",{className:"text-xs text-red-500",children:R}),e.jsx("button",{type:"button",onClick:We,disabled:z,className:"gapah-btn-primary w-full py-2.5 text-sm disabled:opacity-50",children:z?"Generating...":"Generate Copy"}),M.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"gapah-label",children:"Variations"}),M.map((o,b)=>e.jsxs("div",{className:"gapah-variation-card flex items-start justify-between gap-2",children:[e.jsx("p",{className:"flex-1 text-sm text-[var(--gapah-text)]",children:o.text}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[e.jsxs("span",{className:`text-xs ${o.text.length<=J?"text-[var(--gapah-emerald)]":"text-amber-600"}`,children:[o.text.length," chars"]}),e.jsx("button",{type:"button",onClick:()=>ze(b),className:"rounded p-1.5 text-[var(--gapah-text-secondary)] hover:bg-black/5 hover:text-[var(--gapah-text)]",children:o.copied?e.jsx(wa,{className:"h-4 w-4 text-[var(--gapah-emerald)]"}):e.jsx(Ge,{className:"h-4 w-4"})})]})]},b))]})]})}function rt(){const[a,t]=d.useState(null),[s,n]=d.useState(""),[i,r]=d.useState(!1),[l,c]=d.useState(""),g=()=>{navigator.clipboard.read().then(m=>{const j=m.find(f=>f.types.includes("image/png")||f.types.includes("image/jpeg"));j?j.getType("image/png").then(f=>{const k=new FileReader;k.onload=()=>t(k.result),k.readAsDataURL(f)}).catch(()=>{j.getType("image/jpeg").then(f=>{const k=new FileReader;k.onload=()=>t(k.result),k.readAsDataURL(f)})}):c("No image in clipboard")}).catch(()=>c("Clipboard access denied"))},p=()=>{Y.runtime.sendMessage({type:"CAPTURE_SCREENSHOT"}).then(m=>{m.screenshot?t(m.screenshot):c(m.error??"Screenshot failed")}).catch(m=>c(m.message))},h=async()=>{if(!a){c("Paste an image or take a screenshot first.");return}c(""),r(!0),n("");try{const m=await H();if(!m.apiKey){c("Set your API key or OAuth token in Settings first."),r(!1);return}const j=a.replace(/^data:image\/\w+;base64,/,""),f=await qa(j,m.apiKey,m.provider,{baseUrl:m.baseUrl,model:m.model});n(f)}catch(m){c(m instanceof Error?m.message:"Analysis failed")}finally{r(!1)}},x=()=>{s&&navigator.clipboard.writeText(s)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"gapah-label",children:"Screenshot or paste image"}),a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:a,alt:"Data",className:"max-h-40 w-full rounded-[var(--gapah-radius)] border border-[var(--gapah-card-border)] object-contain bg-black/5"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(null),n("")},className:"gapah-btn-secondary px-3 py-1.5 text-xs",children:"Clear"}),e.jsx("button",{type:"button",onClick:p,className:"gapah-btn-secondary px-3 py-1.5 text-xs",children:"Take screenshot"})]})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{type:"button",onClick:g,className:"gapah-dashed-zone flex w-full items-center justify-center gap-2 py-6 text-sm",children:[e.jsx(Be,{className:"h-5 w-5"})," Paste from clipboard"]}),e.jsx("button",{type:"button",onClick:p,className:"flex w-full items-center justify-center gap-2 rounded-[var(--gapah-radius)] border border-[var(--gapah-card-border)] bg-white py-3 text-sm font-medium text-[var(--gapah-text)] hover:bg-black/5",children:"Capture current tab"})]})]}),l&&e.jsx("p",{className:"text-xs text-red-500",children:l}),e.jsx("button",{type:"button",onClick:h,disabled:!a||i,className:"gapah-btn-primary w-full py-2.5 text-sm disabled:opacity-50",children:i?"Analyzing...":"Analyze"}),s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"gapah-label",children:"Analysis"}),e.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-1 rounded-lg px-2 py-1 text-xs text-[var(--gapah-text-secondary)] hover:bg-black/5 hover:text-[var(--gapah-text)]",children:[e.jsx(Ge,{className:"h-3 w-3"})," Copy"]})]}),e.jsx("pre",{className:"max-h-64 overflow-auto rounded-[var(--gapah-radius)] border border-[var(--gapah-card-border)] bg-white p-3 text-xs text-[var(--gapah-text)] whitespace-pre-wrap font-sans",children:s})]})]})}function ct(){const[a,t]=d.useState(null),[s,n]=d.useState(),[i,r]=d.useState("adcopy"),[l,c]=d.useState(!1);d.useEffect(()=>{if(!ta()){t(!0),n("byok");return}(async()=>{if(await da()){t(!0);const x=await se();n(x?.tier);return}const h=await se();t(!!h?.key),n(h?.tier)})()},[]);const g=()=>{t(!0),se().then(p=>n(p?.tier))};return a===null?e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4 bg-[var(--gapah-bg)]",children:e.jsx("div",{className:"text-[var(--gapah-text-secondary)]",children:"Loading..."})}):a?e.jsxs("div",{className:"flex min-h-screen flex-col bg-[var(--gapah-bg)] text-[var(--gapah-text)]",children:[e.jsxs("header",{className:"flex h-12 shrink-0 items-center justify-between border-b border-[var(--gapah-card-border)] bg-[var(--gapah-surface)] px-3",children:[e.jsxs("div",{className:"flex flex-col items-start gap-0",children:[e.jsx("span",{className:"font-semibold text-[var(--gapah-text)]",children:"Gapah"}),s&&e.jsx("span",{className:"text-[10px] text-[var(--gapah-text-secondary)]",children:pa(s)})]}),e.jsx("button",{type:"button",onClick:()=>c(!0),className:"rounded-lg p-1.5 text-[var(--gapah-text-secondary)] hover:bg-black/5 hover:text-[var(--gapah-text)]","aria-label":"Open Settings",children:e.jsx(Ta,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex border-b border-[var(--gapah-card-border)] bg-[var(--gapah-surface)]",children:[e.jsx("button",{type:"button",onClick:()=>r("adcopy"),"aria-label":"Ad Copy tab","aria-pressed":i==="adcopy",className:`flex-1 px-4 py-3 text-sm font-medium ${i==="adcopy"?"border-b-2 border-[var(--gapah-accent)] text-[var(--gapah-accent)]":"text-[var(--gapah-text-secondary)] hover:text-[var(--gapah-text)]"}`,children:"Ad Copy"}),e.jsx("button",{type:"button",onClick:()=>r("datalens"),"aria-label":"Data Lens tab","aria-pressed":i==="datalens",className:`flex-1 px-4 py-3 text-sm font-medium ${i==="datalens"?"border-b-2 border-[var(--gapah-accent)] text-[var(--gapah-accent)]":"text-[var(--gapah-text-secondary)] hover:text-[var(--gapah-text)]"}`,children:"Data Lens"})]}),e.jsxs("main",{className:"flex-1 overflow-auto p-3 bg-[var(--gapah-bg)]",children:[i==="adcopy"&&e.jsx(it,{}),i==="datalens"&&e.jsx(rt,{})]}),l&&e.jsx(Ga,{onClose:()=>c(!1)})]}):e.jsx(ca,{onAuthenticated:g})}const Pe=document.getElementById("root");Pe&&Ze.createRoot(Pe).render(e.jsx(Qe.StrictMode,{children:e.jsx(ct,{})}));
